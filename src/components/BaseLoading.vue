<template>
  <div class="loading">
    <div class="base-logo" :style="{width: size, height: size}">
      <svg xmlns="http://www.w3.org/2000/svg" :width="size" :height="size" viewBox="0 0 274 274">
        <defs>
          <filter id="line-4" x="28.635" y="63.469" width="57.73" height="140.061" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur"/>
            <feFlood flood-opacity="0.161"/>
            <feComposite operator="in" in2="blur"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="line-3" x="60.922" y="62.711" width="101.155" height="173.578" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-2"/>
            <feFlood flood-opacity="0.161"/>
            <feComposite operator="in" in2="blur-2"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="line-2" x="63.351" y="60.669" width="180.299" height="73.663" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-3"/>
            <feFlood flood-opacity="0.161"/>
            <feComposite operator="in" in2="blur-3"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="line-1" x="63.235" y="20.705" width="140.53" height="65.589" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-4"/>
            <feFlood flood-opacity="0.161"/>
            <feComposite operator="in" in2="blur-4"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="node-1" x="0" y="0" width="146" height="146" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-5"/>
            <feFlood flood-opacity="0.149"/>
            <feComposite operator="in" in2="blur-5"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="node-2" x="160" y="0" width="66" height="66" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-6"/>
            <feFlood flood-opacity="0.149"/>
            <feComposite operator="in" in2="blur-6"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="node-3" x="192" y="80" width="82" height="82" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-7"/>
            <feFlood flood-opacity="0.149"/>
            <feComposite operator="in" in2="blur-7"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="node-5" x="8" y="160" width="66" height="66" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-8"/>
            <feFlood flood-opacity="0.149"/>
            <feComposite operator="in" in2="blur-8"/>
            <feComposite in="SourceGraphic"/>
          </filter>
          <filter id="node-4" x="100" y="176" width="98" height="98" filterUnits="userSpaceOnUse">
            <feOffset dx="3" dy="3"/>
            <feGaussianBlur stdDeviation="3" result="blur-9"/>
            <feFlood flood-opacity="0.149"/>
            <feComposite operator="in" in2="blur-9"/>
            <feComposite in="SourceGraphic"/>
          </filter>
        </defs>
        <g id="logo" class="logo" transform="translate(6 6)">
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#line-4)">
            <path id="line-4-2" class="logo-line line-4" d="M32,0,0,120" stroke-linecap="round" transform="translate(38.5 70.5)" fill="none" stroke="#707070" stroke-width="16"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#line-3)">
            <path id="line-3-2" class="logo-line line-3" d="M0,0,76,152" stroke-linecap="round" transform="translate(70.5 70.5)" fill="none" stroke="#707070" stroke-width="16"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#line-2)">
            <path id="line-2-2" class="logo-line line-2" d="M0,0,160,48" stroke-linecap="round" transform="translate(70.5 70.5)" fill="none" stroke="#707070" stroke-width="16"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#line-1)">
            <path id="line-1-2" class="logo-line line-1" d="M0,40,120,0" stroke-linecap="round" transform="translate(70.5 30.5)" fill="none" stroke="#707070" stroke-width="16"/>
          </g>

          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#node-1)">
            <circle id="node-1-2" class="logo-node node-1" cx="64" cy="64" r="64" transform="translate(6 6)" fill="#59c292"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#node-2)">
            <circle id="node-2-2" class="logo-node node-2" cx="24" cy="24" r="24" transform="translate(166 6)" fill="#59c292"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#node-3)">
            <circle id="node-3-2" class="logo-node node-3" cx="32" cy="32" r="32" transform="translate(198 86)" fill="#59c292"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#node-5)">
            <circle id="node-5-2" class="logo-node node-5" cx="24" cy="24" r="24" transform="translate(14 166)" fill="#59c292"/>
          </g>
          <g transform="matrix(1, 0, 0, 1, -6, -6)" filter="url(#node-4)">
            <circle id="node-4-2" class="logo-node node-4" cx="40" cy="40" r="40" transform="translate(106 182)" fill="#59c292"/>
          </g>
        </g>
      </svg>
    </div>
    <span :style="{ fontSize: fontSize }">{{tips}}</span>
  </div>
</template>

<script>
  /* eslint-disable */
  import BaseLogo from "./BaseLogo";
  export default {
    name: "BaseLoading",
    components: {BaseLogo},
    props: {
      size: String,
      fontSize: String,
      tips: String,
    },
    data() {
      return {
        timeLine: gsap.timeline(),
      };
    },
    mounted() {
      this.init();
    },
    methods: {
      init() {
        this.timeLine.add(
          gsap.from(this.$el.getElementsByClassName("node-1"), { "r": 0, duration: 0.5 })
        );
        for (let i = 1; i <= 4; i++) {
          this.timeLine.add(
            gsap.from(this.$el.getElementsByClassName("line-" + i), { drawSVG: "0% 0%", duration: 0.3 })
          ).add(
            gsap.from(this.$el.getElementsByClassName("node-" + (i + 1)), { "r": 0, duration: 0.5 })
          )
        }
        this.timeLine.yoyo(true).repeat(-1);
      },
      startLoading() {
        this.$el.style.zIndex = "999";
        this.$el.style.opacity = "1";
      },
      stopLoading() {
        this.$el.style.zIndex = "-1";
        this.$el.style.opacity = "0";
      },
    },
  }
</script>

<style scoped lang="scss">
  .loading {
    z-index: 1000;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    @include set_background_color("card_color");
    border-radius: 8px;
    opacity: 1;
    pointer-events: none;
    span {
      @include set_text_color("text_color_2");
    }
    .base-logo {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .logo-line {
      @include set_stroke_color("text_color_1");
    }
    .logo-node {
      @include set_fill_color("button_color_1");
    }
  }
</style>
